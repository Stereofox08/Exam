<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/header.css">
    <link rel="stylesheet" href="assets/css/category.css">
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/footer.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body>
    <div id="inversion-wrapper">
    <header class="header">
        <div class="header__container">
            <div class="header__name">KazNews</div>
            <button id="switchTheme" onclick="toggleTheme()">üåì</button>

            <div class="header__menu">
                <a href="eu.html" class="header__menu-item"><span class="txt">Home</span></a>
                <a href="category-eu.html" class="header__menu-item" id="active"><span class="txt">Categories</span></a>
                <a href="404.html" class="header__menu-item"><span class="txt">Popular</span></a>
                <a href="404.html" class="header__menu-item"><span class="txt">Latest</span></a>
               <div class="switch"> 
                <div class="header__menu-item--select">
                <select onchange="location = this.value;">
                    <option value="category-eu.html" selected>EN</option>
                    <option value="category.html">RU</option>
                    <option value="category-kz.html">KZ</option>
                  </select>
                </div></div>
            </div>
            <div class="header__login" id="loginArea"></div>
    </header>


<main class="main">
        <div class="main__container">
            <a href="#" class="main__container-item" id="one">
                <div class="text">ECONOMY</div>
            </a>
            <a href="#" class="main__container-item" id="two">
                <div class="text">POLICY</div>
            </a>
            <a href="#" class="main__container-item" id="three">
                <div class="text">CULTURE</div>
            </a>
            <a href="#" class="main__container-item" id="four">
                <div class="text">SPORT</div>
            </a>
            <a href="#" class="main__container-item" id="five">
                <div class="text">SOCIETY</div>
            </a>
            <a href="#" class="main__container-item" id="six">
                <div class="text">EDUCATION</div>
            </a>
            <a href="#" class="main__container-item" id="seven">
                <div class="text">SCIENCE</div>
            </a>
            <a href="#" class="main__container-item" id="eight">
                <div class="text">TECHNOLOGIES</div>
            </a>
            <a href="#" class="main__container-item" id="nine">
                <div class="text">MEDICINE</div>
            </a>
            <a href="#" class="main__container-item" id="ten">
                <div class="text">INCIDENTS</div>
            </a>
    </div>
</main>
    <footer class="footer">
        <div class="footer__container">
            <div class="left">
            <div class="footer__left-text">SUBSCRIBE TO NEWSLETTER</div>
            <div class="footer__input">
            <input type="email" name="" id="" placeholder="asdfg123@gmail.com">
            <span id="footer"><a href="404.html">Subscribe</a></span>
            </div>
            </div>
        </div>
    </footer>
    <div id="editorArea" style="max-width: 800px; margin: 40px auto; padding: 30px; background: #fff; border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); font-family: Arial, sans-serif; display: none;">
  <h2 style="margin-bottom: 20px; font-size: 28px; color: #333;">üìù Creating an article</h2>
  <input type="text" id="articleTitle" placeholder="Article title"
    style="width: 100%; padding: 12px 16px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 12px; font-size: 16px;">
  <div style="margin-bottom: 10px;">
  <button id="boldBtn" onclick="format('bold')"><b>B</b></button>
  <button id="italicBtn" onclick="format('italic')"><i>I</i></button>
  <button id="underlineBtn" onclick="format('underline')"><u>U</u></button>
  <button id="ulBtn" onclick="format('insertUnorderedList')">‚Ä¢ List</button>
  <button id="h2Btn" onclick="format('formatBlock','h2')">H2</button>
  <button id="quoteBtn" onclick="format('formatBlock','blockquote')">‚ùù Quote</button>
    <style>
  #editorArea button {
    margin-right: 6px;
    padding: 6px 10px;
    border: none;
    background: #f0f0f0;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s ease;
  }
  #editorArea button:hover {
    background: #e0e0e0;
  }
  #editorArea button.active {
    background: #333;
    color: #fff;
  }
</style>
  </div>
  <div id="articleContent" contenteditable="true"
    style="min-height: 200px; padding: 12px 16px; border: 1px solid #ccc; border-radius: 12px; font-size: 16px;"></div>
<label for="articleImage" style="
  display: inline-block;
  padding: 10px 16px;
  background-color: #007BFF;
  color: white;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  margin-top: 20px;
">üìé Select file</label>
<input type="file" id="articleImage" accept="image/*" style="display: none;">
<span id="fileName" style="margin-left: 10px; font-style: italic;">File not selected</span>
  <div id="imagePreview" style="margin-top: 20px; display: none;">
    <p style="margin-bottom: 10px;">üì∏ Preview image:</p>
    <img id="previewImg" src="" alt="Image Preview"
      style="max-width: 100%; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
  </div>
  <button onclick="submitArticle()" style="
    margin-top: 30px;
    padding: 12px 24px;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  ">Publish</button>
</div>
<script>
  const loginArea = document.getElementById('loginArea');
  const user = JSON.parse(localStorage.getItem('currentUser'));
  const loggedIn = localStorage.getItem('loggedIn');
  function logout() {
    localStorage.removeItem('loggedIn');
    localStorage.removeItem('currentUser');
    location.reload();
  }
  if (user && loggedIn === 'true') {
    loginArea.innerHTML = `
      <div>${user.nickname}</div>
      <div style="margin-left:10px; cursor:pointer" onclick="logout()">‚úï</div>
    `;
   if (user.email === 'zyablikov04@gmail.com') { 
   editorArea.style.display = 'block'; 
   document.querySelector(".main").style.display = "none" 
   document.querySelector(".category").style.display = "none" 
   document.querySelector(".popular").style.display = "none" 
   document.querySelector(".footer").style.display = "none" } 
  } else {
    loginArea.innerHTML = '<a class="login" href="login-eu.html">Login</a>';
  }
function format(command, value = null) {
  document.execCommand(command, false, value);
  updateButtons();
}
function updateButtons() {
  const buttons = [
    { id: 'boldBtn', command: 'bold' },
    { id: 'italicBtn', command: 'italic' },
    { id: 'underlineBtn', command: 'underline' },
    { id: 'ulBtn', command: 'insertUnorderedList' },
  ];
  buttons.forEach(({ id, command }) => {
    const isActive = document.queryCommandState(command);
    const btn = document.getElementById(id);
    if (isActive) {
      btn.classList.add('active');
    } else {
      btn.classList.remove('active');
    }
  });
}
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é –∫—É—Ä—Å–æ—Ä–∞ –∏ –∫–ª–∏–∫—É
const editor = document.getElementById('articleContent');
editor.addEventListener('keyup', updateButtons);
editor.addEventListener('mouseup', updateButtons);

  function submitArticle() {
    const title = document.getElementById('articleTitle').value.trim();
    const content = document.getElementById('articleContent').innerHTML.trim();
    const imageInput = document.getElementById('articleImage');
    const imageFile = imageInput.files[0];

    if (!title || !content) {
      alert('Please fill in all fields.');
      return;
    }

    if (imageFile) {
      const reader = new FileReader();
      reader.onload = function (e) {
        alert('The article is published with an image!');
        console.log({ title, content, image: e.target.result });
      };
      reader.readAsDataURL(imageFile);
    } else {
      alert('The article was published without an image!');
      console.log({ title, content });
    }

    document.getElementById('articleTitle').value = '';
    document.getElementById('articleContent').innerHTML = '';
    imageInput.value = '';
    document.getElementById('imagePreview').style.display = 'none';
  }

  document.getElementById('articleImage').addEventListener('change', function () {
  const file = this.files[0];
  const preview = document.getElementById('imagePreview');
  const previewImg = document.getElementById('previewImg');
  const fileName = document.getElementById('fileName');

  if (file) {
    fileName.textContent = file.name; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
    const reader = new FileReader();
    reader.onload = function (e) {
      previewImg.src = e.target.result;
      preview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    fileName.textContent = 'File not selected';
    preview.style.display = 'none';
  }
});

</script>
<script>
  function toggleTheme() {
  document.body.classList.toggle('dark-theme');
  localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
}

window.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark-theme');
  }
});
</script>

</body>
</html>
